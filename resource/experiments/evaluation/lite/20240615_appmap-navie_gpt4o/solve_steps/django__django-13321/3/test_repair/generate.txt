@generate /noformat

<test-errors>
activate successful
CONDA_EXE=/usr/share/miniconda/bin/conda
_CE_M=
PWD=/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0
CONDA_PREFIX=/usr/share/miniconda/envs/django__django__3.2-0
CONDA_PROMPT_MODIFIER=(django__django__3.2-0) 
_CE_CONDA=
CONDA_SHLVL=1
SHLVL=1
CONDA_PYTHON_EXE=/usr/share/miniconda/bin/python
CONDA_DEFAULT_ENV=django__django__3.2-0
CONDA_PKGS_DIRS=/usr/share/miniconda/cache
PATH=/usr/share/miniconda/envs/django__django__3.2-0/bin:/usr/share/miniconda/condabin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
_=/usr/bin/printenv
Testing against Django installed in '/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django' with up to 4 processes
Importing application sessions_tests
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, messages, sessions, sessions_tests, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table sessions_tests_customsession
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (0 silenced).
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
test_actual_expiry (sessions_tests.tests.CacheDBSessionTests) ... ok
test_clear (sessions_tests.tests.CacheDBSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.CacheDBSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.CacheDBSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.CacheDBSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.CacheDBSessionTests) ... ok
test_cycle (sessions_tests.tests.CacheDBSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.CacheDBSessionTests) ... ok
test_decode (sessions_tests.tests.CacheDBSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.CacheDBSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.CacheDBSessionTests) ... FAIL
test_default_expiry (sessions_tests.tests.CacheDBSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.CacheDBSessionTests) ... ok
test_delete (sessions_tests.tests.CacheDBSessionTests) ... ok
test_exists_searches_cache_first (sessions_tests.tests.CacheDBSessionTests) ... ok
test_flush (sessions_tests.tests.CacheDBSessionTests) ... ok
test_get_empty (sessions_tests.tests.CacheDBSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.CacheDBSessionTests) ... ok
test_has_key (sessions_tests.tests.CacheDBSessionTests) ... ok
test_invalid_key (sessions_tests.tests.CacheDBSessionTests) ... ok
test_items (sessions_tests.tests.CacheDBSessionTests) ... ok
test_keys (sessions_tests.tests.CacheDBSessionTests) ... ok
test_load_overlong_key (sessions_tests.tests.CacheDBSessionTests) ... ok
test_new_session (sessions_tests.tests.CacheDBSessionTests) ... ok
test_non_default_cache (sessions_tests.tests.CacheDBSessionTests) ... ok
test_pop (sessions_tests.tests.CacheDBSessionTests) ... ok
test_pop_default (sessions_tests.tests.CacheDBSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.CacheDBSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.CacheDBSessionTests) ... ok
test_save (sessions_tests.tests.CacheDBSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.CacheDBSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.CacheDBSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.CacheDBSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.CacheDBSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.CacheDBSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.CacheDBSessionTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.CacheDBSessionTests) ... ok
test_setdefault (sessions_tests.tests.CacheDBSessionTests) ... ok
test_store (sessions_tests.tests.CacheDBSessionTests) ... ok
test_update (sessions_tests.tests.CacheDBSessionTests) ... ok
test_values (sessions_tests.tests.CacheDBSessionTests) ... ok
test_actual_expiry (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_clear (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_cycle (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_decode (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... FAIL
test_decode_legacy (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... FAIL
test_default_expiry (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_delete (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_exists_searches_cache_first (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_flush (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_get_empty (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_has_key (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_invalid_key (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_items (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_keys (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_load_overlong_key (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_new_session (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_non_default_cache (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_pop (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_pop_default (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_save (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.CacheDBSessionWithTimeZoneTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.CacheDBSessionWithTimeZoneTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.CacheDBSessionWithTimeZoneTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_setdefault (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_store (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_update (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_values (sessions_tests.tests.CacheDBSessionWithTimeZoneTests) ... ok
test_actual_expiry (sessions_tests.tests.DatabaseSessionTests) ... ok
test_clear (sessions_tests.tests.DatabaseSessionTests) ... ok
test_clearsessions_command (sessions_tests.tests.DatabaseSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.DatabaseSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.DatabaseSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.DatabaseSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.DatabaseSessionTests) ... ok
test_cycle (sessions_tests.tests.DatabaseSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.DatabaseSessionTests) ... ok
test_decode (sessions_tests.tests.DatabaseSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.DatabaseSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.DatabaseSessionTests) ... FAIL
test_default_expiry (sessions_tests.tests.DatabaseSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.DatabaseSessionTests) ... ok
test_delete (sessions_tests.tests.DatabaseSessionTests) ... ok
test_flush (sessions_tests.tests.DatabaseSessionTests) ... ok
test_get_empty (sessions_tests.tests.DatabaseSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.DatabaseSessionTests) ... ok
test_has_key (sessions_tests.tests.DatabaseSessionTests) ... ok
test_invalid_key (sessions_tests.tests.DatabaseSessionTests) ... ok
test_items (sessions_tests.tests.DatabaseSessionTests) ... ok
test_keys (sessions_tests.tests.DatabaseSessionTests) ... ok
test_new_session (sessions_tests.tests.DatabaseSessionTests) ... ok
test_pop (sessions_tests.tests.DatabaseSessionTests) ... ok
test_pop_default (sessions_tests.tests.DatabaseSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.DatabaseSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.DatabaseSessionTests) ... ok
test_save (sessions_tests.tests.DatabaseSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.DatabaseSessionTests) ... ok
test_session_get_decoded (sessions_tests.tests.DatabaseSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.DatabaseSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.DatabaseSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.DatabaseSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.DatabaseSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.DatabaseSessionTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.DatabaseSessionTests) ... ok
test_session_str (sessions_tests.tests.DatabaseSessionTests)
Session repr should be the session key. ... ok
test_sessionmanager_save (sessions_tests.tests.DatabaseSessionTests) ... ok
test_setdefault (sessions_tests.tests.DatabaseSessionTests) ... ok
test_store (sessions_tests.tests.DatabaseSessionTests) ... ok
test_update (sessions_tests.tests.DatabaseSessionTests) ... ok
test_values (sessions_tests.tests.DatabaseSessionTests) ... ok
test_actual_expiry (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_clear (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_clearsessions_command (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_cycle (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_decode (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.CustomDatabaseSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.CustomDatabaseSessionTests) ... FAIL
test_default_expiry (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_delete (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_extra_session_field (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_flush (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_get_empty (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_has_key (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_invalid_key (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_items (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_keys (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_new_session (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_pop (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_pop_default (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_save (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_session_get_decoded (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.CustomDatabaseSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.CustomDatabaseSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.CustomDatabaseSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_session_str (sessions_tests.tests.CustomDatabaseSessionTests)
Session repr should be the session key. ... ok
test_sessionmanager_save (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_setdefault (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_store (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_update (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_values (sessions_tests.tests.CustomDatabaseSessionTests) ... ok
test_actual_expiry (sessions_tests.tests.CookieSessionTests) ... expected failure
test_clear (sessions_tests.tests.CookieSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.CookieSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.CookieSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.CookieSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.CookieSessionTests) ... ok
test_cycle (sessions_tests.tests.CookieSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.CookieSessionTests) ... ok
test_decode (sessions_tests.tests.CookieSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.CookieSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.CookieSessionTests) ... FAIL
test_default_expiry (sessions_tests.tests.CookieSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.CookieSessionTests) ... ok
test_delete (sessions_tests.tests.CookieSessionTests) ... ok
test_flush (sessions_tests.tests.CookieSessionTests) ... ok
test_get_empty (sessions_tests.tests.CookieSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.CookieSessionTests) ... ok
test_has_key (sessions_tests.tests.CookieSessionTests) ... ok
test_invalid_key (sessions_tests.tests.CookieSessionTests) ... ok
test_items (sessions_tests.tests.CookieSessionTests) ... ok
test_keys (sessions_tests.tests.CookieSessionTests) ... ok
test_new_session (sessions_tests.tests.CookieSessionTests) ... ok
test_pop (sessions_tests.tests.CookieSessionTests) ... ok
test_pop_default (sessions_tests.tests.CookieSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.CookieSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.CookieSessionTests) ... ok
test_save (sessions_tests.tests.CookieSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.CookieSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.CookieSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.CookieSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.CookieSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.CookieSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.CookieSessionTests) ... skipped "Cookie backend doesn't have an external store to create records in."
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.CookieSessionTests) ... skipped 'CookieSession is stored in the client and there is no way to query it.'
test_setdefault (sessions_tests.tests.CookieSessionTests) ... ok
test_store (sessions_tests.tests.CookieSessionTests) ... ok
test_unpickling_exception (sessions_tests.tests.CookieSessionTests) ... ok
test_update (sessions_tests.tests.CookieSessionTests) ... ok
test_values (sessions_tests.tests.CookieSessionTests) ... ok
test_actual_expiry (sessions_tests.tests.CacheSessionTests) ... ok
test_clear (sessions_tests.tests.CacheSessionTests) ... ok
test_create_and_save (sessions_tests.tests.CacheSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.CacheSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.CacheSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.CacheSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.CacheSessionTests) ... ok
test_cycle (sessions_tests.tests.CacheSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.CacheSessionTests) ... ok
test_decode (sessions_tests.tests.CacheSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.CacheSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.CacheSessionTests) ... FAIL
test_default_cache (sessions_tests.tests.CacheSessionTests) ... ok
test_default_expiry (sessions_tests.tests.CacheSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.CacheSessionTests) ... ok
test_delete (sessions_tests.tests.CacheSessionTests) ... ok
test_flush (sessions_tests.tests.CacheSessionTests) ... ok
test_get_empty (sessions_tests.tests.CacheSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.CacheSessionTests) ... ok
test_has_key (sessions_tests.tests.CacheSessionTests) ... ok
test_invalid_key (sessions_tests.tests.CacheSessionTests) ... ok
test_items (sessions_tests.tests.CacheSessionTests) ... ok
test_keys (sessions_tests.tests.CacheSessionTests) ... ok
test_load_overlong_key (sessions_tests.tests.CacheSessionTests) ... ok
test_new_session (sessions_tests.tests.CacheSessionTests) ... ok
test_non_default_cache (sessions_tests.tests.CacheSessionTests) ... ok
test_pop (sessions_tests.tests.CacheSessionTests) ... ok
test_pop_default (sessions_tests.tests.CacheSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.CacheSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.CacheSessionTests) ... ok
test_save (sessions_tests.tests.CacheSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.CacheSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.CacheSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.CacheSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.CacheSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.CacheSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.CacheSessionTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.CacheSessionTests) ... ok
test_setdefault (sessions_tests.tests.CacheSessionTests) ... ok
test_store (sessions_tests.tests.CacheSessionTests) ... ok
test_update (sessions_tests.tests.CacheSessionTests) ... ok
test_values (sessions_tests.tests.CacheSessionTests) ... ok
test_empty_session_saved (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_flush_empty_without_session_cookie_doesnt_set_cookie (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_httponly_session_cookie (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_no_httponly_session_cookie (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_samesite_session_cookie (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_secure_session_cookie (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_session_delete_on_end (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_session_delete_on_end_with_custom_domain_and_path (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_session_save_on_500 (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_session_update_error_redirect (sessions_tests.tests.SessionMiddlewareTests) ... ok
test_actual_expiry (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_clear (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_clearsessions_command (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_configuration_check (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_cycle (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_decode (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.FileSessionPathLibTests) ... FAIL
test_decode_legacy (sessions_tests.tests.FileSessionPathLibTests) ... FAIL
test_default_expiry (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_delete (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_flush (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_get_empty (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_has_key (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_invalid_key (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_invalid_key_backslash (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_invalid_key_forwardslash (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_items (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_keys (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_new_session (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_pop (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_pop_default (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_save (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.FileSessionPathLibTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.FileSessionPathLibTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.FileSessionPathLibTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_setdefault (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_store (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_update (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_values (sessions_tests.tests.FileSessionPathLibTests) ... ok
test_actual_expiry (sessions_tests.tests.FileSessionTests) ... ok
test_clear (sessions_tests.tests.FileSessionTests) ... ok
test_clearsessions_command (sessions_tests.tests.FileSessionTests) ... ok
test_configuration_check (sessions_tests.tests.FileSessionTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.FileSessionTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.FileSessionTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.FileSessionTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.FileSessionTests) ... ok
test_cycle (sessions_tests.tests.FileSessionTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.FileSessionTests) ... ok
test_decode (sessions_tests.tests.FileSessionTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.FileSessionTests) ... FAIL
test_decode_legacy (sessions_tests.tests.FileSessionTests) ... FAIL
test_default_expiry (sessions_tests.tests.FileSessionTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.FileSessionTests) ... ok
test_delete (sessions_tests.tests.FileSessionTests) ... ok
test_flush (sessions_tests.tests.FileSessionTests) ... ok
test_get_empty (sessions_tests.tests.FileSessionTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.FileSessionTests) ... ok
test_has_key (sessions_tests.tests.FileSessionTests) ... ok
test_invalid_key (sessions_tests.tests.FileSessionTests) ... ok
test_invalid_key_backslash (sessions_tests.tests.FileSessionTests) ... ok
test_invalid_key_forwardslash (sessions_tests.tests.FileSessionTests) ... ok
test_items (sessions_tests.tests.FileSessionTests) ... ok
test_keys (sessions_tests.tests.FileSessionTests) ... ok
test_new_session (sessions_tests.tests.FileSessionTests) ... ok
test_pop (sessions_tests.tests.FileSessionTests) ... ok
test_pop_default (sessions_tests.tests.FileSessionTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.FileSessionTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.FileSessionTests) ... ok
test_save (sessions_tests.tests.FileSessionTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.FileSessionTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.FileSessionTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.FileSessionTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.FileSessionTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.FileSessionTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.FileSessionTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.FileSessionTests) ... ok
test_setdefault (sessions_tests.tests.FileSessionTests) ... ok
test_store (sessions_tests.tests.FileSessionTests) ... ok
test_update (sessions_tests.tests.FileSessionTests) ... ok
test_values (sessions_tests.tests.FileSessionTests) ... ok
test_actual_expiry (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_clear (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_clearsessions_command (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_custom_expiry_datetime (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_custom_expiry_reset (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_custom_expiry_seconds (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_custom_expiry_timedelta (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_cycle (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_cycle_with_no_session_cache (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_decode (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_decode_failure_logged_to_security (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... FAIL
test_decode_legacy (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... FAIL
test_default_expiry (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_default_hashing_algorith_legacy_decode (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_delete (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_flush (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_get_empty (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_get_expire_at_browser_close (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_has_key (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_invalid_key (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_items (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_keys (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_new_session (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_pop (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_pop_default (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_pop_default_named_argument (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_pop_no_default_keyerror_raised (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_save (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_save_doesnt_clear_data (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_session_get_decoded (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_session_key_empty_string_invalid (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
Falsey values (Such as an empty string) are rejected. ... ok
test_session_key_is_read_only (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_session_key_too_short_invalid (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
Strings shorter than 8 characters are rejected. ... ok
test_session_key_valid_string_saved (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
Strings of length 8 and up are accepted and stored. ... ok
test_session_load_does_not_create_record (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_session_save_does_not_resurrect_session_logged_out_in_other_context (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_session_str (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
Session repr should be the session key. ... ok
test_sessionmanager_save (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_setdefault (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_store (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_update (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok
test_values (sessions_tests.tests.DatabaseSessionWithTimeZoneTests) ... ok

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.CacheDBSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.CacheDBSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.CacheDBSessionWithTimeZoneTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.CacheDBSessionWithTimeZoneTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.DatabaseSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.DatabaseSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.CustomDatabaseSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.CustomDatabaseSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.CookieSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.CookieSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.CacheSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.CacheSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.FileSessionPathLibTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.FileSessionPathLibTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.FileSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.FileSessionTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

======================================================================
FAIL: test_decode_failure_logged_to_security (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 338, in test_decode_failure_logged_to_security
    self.assertEqual({}, self.session.decode(bad_encode))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 338, in __exit__
    .format(logging.getLevelName(self.level), self.logger.name))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 135, in _raiseFailure
    raise self.test_case.failureException(msg)
AssertionError: no logs of level WARNING or higher triggered on django.security.SuspiciousSession

======================================================================
FAIL: test_decode_legacy (sessions_tests.tests.DatabaseSessionWithTimeZoneTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/django/test/utils.py", line 388, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmpa2f1gyr0/django__django__3.2-0/tests/sessions_tests/tests.py", line 325, in test_decode_legacy
    {'a test key': 'a test value'},
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 1121, in assertDictEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.2-0/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: {} != {'a test key': 'a test value'}
- {}
+ {'a test key': 'a test value'}

----------------------------------------------------------------------
Ran 384 tests in 0.214s

FAILED (failures=18, skipped=2, expected failures=1)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...

</test-errors>

<file>
<path>django/contrib/sessions/backends/base.py</path>
<content>
1: import base64
2: import logging
3: import string
4: import warnings
5: import binascii
6: from datetime import datetime, timedelta
7: 
8: from django.conf import settings
9: from django.contrib.sessions.exceptions import SuspiciousSession
10: from django.core import signing
11: from django.core.exceptions import SuspiciousOperation
12: from django.utils import timezone
13: from django.utils.crypto import (
14:     constant_time_compare, get_random_string, salted_hmac,
15: )
16: from django.utils.deprecation import RemovedInDjango40Warning
17: from django.utils.module_loading import import_string
18: from django.utils.translation import LANGUAGE_SESSION_KEY
19: 
20: # session_key should not be case sensitive because some backends can store it
21: # on case insensitive file systems.
22: VALID_KEY_CHARS = string.ascii_lowercase + string.digits
23: 
24: 
25: class CreateError(Exception):
26:     """
27:     Used internally as a consistent exception type to catch from save (see the
28:     docstring for SessionBase.save() for details).
29:     """
30:     pass
31: 
32: 
33: class UpdateError(Exception):
34:     """
35:     Occurs if Django tries to update a session that was deleted.
36:     """
37:     pass
38: 
39: 
40: class SessionBase:
41:     """
42:     Base class for all Session classes.
43:     """
44:     TEST_COOKIE_NAME = 'testcookie'
45:     TEST_COOKIE_VALUE = 'worked'
46: 
47:     __not_given = object()
48: 
49:     def __init__(self, session_key=None):
50:         self._session_key = session_key
51:         self.accessed = False
52:         self.modified = False
53:         self.serializer = import_string(settings.SESSION_SERIALIZER)
54: 
55:     def __contains__(self, key):
56:         return key in self._session
57: 
58:     def __getitem__(self, key):
59:         if key == LANGUAGE_SESSION_KEY:
60:             warnings.warn(
61:                 'The user language will no longer be stored in '
62:                 'request.session in Django 4.0. Read it from '
63:                 'request.COOKIES[settings.LANGUAGE_COOKIE_NAME] instead.',
64:                 RemovedInDjango40Warning, stacklevel=2,
65:             )
66:         return self._session[key]
67: 
68:     def __setitem__(self, key, value):
69:         self._session[key] = value
70:         self.modified = True
71: 
72:     def __delitem__(self, key):
73:         del self._session[key]
74:         self.modified = True
75: 
76:     @property
77:     def key_salt(self):
78:         return 'django.contrib.sessions.' + self.__class__.__qualname__
79: 
80:     def get(self, key, default=None):
81:         return self._session.get(key, default)
82: 
83:     def pop(self, key, default=__not_given):
84:         self.modified = self.modified or key in self._session
85:         args = () if default is self.__not_given else (default,)
86:         return self._session.pop(key, *args)
87: 
88:     def setdefault(self, key, value):
89:         if key in self._session:
90:             return self._session[key]
91:         else:
92:             self.modified = True
93:             self._session[key] = value
94:             return value
95: 
96:     def set_test_cookie(self):
97:         self[self.TEST_COOKIE_NAME] = self.TEST_COOKIE_VALUE
98: 
99:     def test_cookie_worked(self):
100:         return self.get(self.TEST_COOKIE_NAME) == self.TEST_COOKIE_VALUE
101: 
102:     def delete_test_cookie(self):
103:         del self[self.TEST_COOKIE_NAME]
104: 
105:     def _hash(self, value):
106:         # RemovedInDjango40Warning: pre-Django 3.1 format will be invalid.
107:         key_salt = "django.contrib.sessions" + self.__class__.__name__
108:         return salted_hmac(key_salt, value).hexdigest()
109: 
110:     def encode(self, session_dict):
111:         "Return the given session dictionary serialized and encoded as a string."
112:         # RemovedInDjango40Warning: DEFAULT_HASHING_ALGORITHM will be removed.
113:         if settings.DEFAULT_HASHING_ALGORITHM == 'sha1':
114:             return self._legacy_encode(session_dict)
115:         return signing.dumps(
116:             session_dict, salt=self.key_salt, serializer=self.serializer,
117:             compress=True,
118:         )
119: 
120:     def decode(self, session_data):
121:         try:
122:             return signing.loads(session_data, salt=self.key_salt, serializer=self.serializer)
123:         except signing.BadSignature as e:
124:             logger = logging.getLogger('django.security.BadSignature')
125:             logger.warning(f"BadSignature exception when decoding session data: {e}")
126:         except binascii.Error as e:
127:             logger = logging.getLogger('django.security.binascii.Error')
128:             logger.warning(f"binascii.Error exception when decoding session data: {e}")
129:         except Exception as e:
130:             logger = logging.getLogger('django.security.Exception')
131:             logger.warning(f"Exception when decoding session data: {e}")
132:             return self._legacy_decode(session_data)
133:         return {}
134: 
135:     def _legacy_encode(self, session_dict):
136:         # RemovedInDjango40Warning.
137:         serialized = self.serializer().dumps(session_dict)
138:         hash = self._hash(serialized)
139:         return base64.b64encode(hash.encode() + b':' + serialized).decode('ascii')
140: 
141:     def _legacy_decode(self, session_data):
142:         # RemovedInDjango40Warning: pre-Django 3.1 format will be invalid.
143:         encoded_data = base64.b64decode(session_data.encode('ascii'))
144:         try:
145:             # could produce ValueError if there is no ':'
146:             hash, serialized = encoded_data.split(b':', 1)
147:             expected_hash = self._hash(serialized)
148:             if not constant_time_compare(hash.decode(), expected_hash):
149:                 raise SuspiciousSession("Session data corrupted")
150:             else:
151:                 return self.serializer().loads(serialized)
152:         except Exception as e:
153:             # ValueError, SuspiciousOperation, unpickling exceptions. If any of
154:             # these happen, just return an empty dictionary (an empty session).
155:             if isinstance(e, SuspiciousOperation):
156:                 logger = logging.getLogger('django.security.%s' % e.__class__.__name__)
157:                 logger.warning(str(e))
158:             return {}
159: 
160:     def update(self, dict_):
161:         self._session.update(dict_)
162:         self.modified = True
163: 
164:     def has_key(self, key):
165:         return key in self._session
166: 
167:     def keys(self):
168:         return self._session.keys()
169: 
170:     def values(self):
171:         return self._session.values()
172: 
173:     def items(self):
174:         return self._session.items()
175: 
176:     def clear(self):
177:         # To avoid unnecessary persistent storage accesses, we set up the
178:         # internals directly (loading data wastes time, since we are going to
179:         # set it to an empty dict anyway).
180:         self._session_cache = {}
181:         self.accessed = True
182:         self.modified = True
183: 
184:     def is_empty(self):
185:         "Return True when there is no session_key and the session is empty."
186:         try:
187:             return not self._session_key and not self._session_cache
188:         except AttributeError:
189:             return True
190: 
191:     def _get_new_session_key(self):
192:         "Return session key that isn't being used."
193:         while True:
194:             session_key = get_random_string(32, VALID_KEY_CHARS)
195:             if not self.exists(session_key):
196:                 return session_key
197: 
198:     def _get_or_create_session_key(self):
199:         if self._session_key is None:
200:             self._session_key = self._get_new_session_key()
201:         return self._session_key
202: 
203:     def _validate_session_key(self, key):
204:         """
205:         Key must be truthy and at least 8 characters long. 8 characters is an
206:         arbitrary lower bound for some minimal key security.
207:         """
208:         return key and len(key) >= 8
209: 
210:     def _get_session_key(self):
211:         return self.__session_key
212: 
213:     def _set_session_key(self, value):
214:         """
215:         Validate session key on assignment. Invalid values will set to None.
216:         """
217:         if self._validate_session_key(value):
218:             self.__session_key = value
219:         else:
220:             self.__session_key = None
221: 
222:     session_key = property(_get_session_key)
223:     _session_key = property(_get_session_key, _set_session_key)
224: 
225:     def _get_session(self, no_load=False):
226:         """
227:         Lazily load session from storage (unless "no_load" is True, when only
228:         an empty dict is stored) and store it in the current instance.
229:         """
230:         self.accessed = True
231:         try:
232:             return self._session_cache
233:         except AttributeError:
234:             if self.session_key is None or no_load:
235:                 self._session_cache = {}
236:             else:
237:                 self._session_cache = self.load()
238:         return self._session_cache
239: 
240:     _session = property(_get_session)
241: 
242:     def get_session_cookie_age(self):
243:         return settings.SESSION_COOKIE_AGE
244: 
245:     def get_expiry_age(self, **kwargs):
246:         """Get the number of seconds until the session expires.
247: 
248:         Optionally, this function accepts `modification` and `expiry` keyword
249:         arguments specifying the modification and expiry of the session.
250:         """
251:         try:
252:             modification = kwargs['modification']
253:         except KeyError:
254:             modification = timezone.now()
255:         # Make the difference between "expiry=None passed in kwargs" and
256:         # "expiry not passed in kwargs", in order to guarantee not to trigger
257:         # self.load() when expiry is provided.
258:         try:
259:             expiry = kwargs['expiry']
260:         except KeyError:
261:             expiry = self.get('_session_expiry')
262: 
263:         if not expiry:   # Checks both None and 0 cases
264:             return self.get_session_cookie_age()
265:         if not isinstance(expiry, datetime):
266:             return expiry
267:         delta = expiry - modification
268:         return delta.days * 86400 + delta.seconds
269: 
270:     def get_expiry_date(self, **kwargs):
271:         """Get session the expiry date (as a datetime object).
272: 
273:         Optionally, this function accepts `modification` and `expiry` keyword
274:         arguments specifying the modification and expiry of the session.
275:         """
276:         try:
277:             modification = kwargs['modification']
278:         except KeyError:
279:             modification = timezone.now()
280:         # Same comment as in get_expiry_age
281:         try:
282:             expiry = kwargs['expiry']
283:         except KeyError:
284:             expiry = self.get('_session_expiry')
285: 
286:         if isinstance(expiry, datetime):
287:             return expiry
288:         expiry = expiry or self.get_session_cookie_age()
289:         return modification + timedelta(seconds=expiry)
290: 
291:     def set_expiry(self, value):
292:         """
293:         Set a custom expiration for the session. ``value`` can be an integer,
294:         a Python ``datetime`` or ``timedelta`` object or ``None``.
295: 
296:         If ``value`` is an integer, the session will expire after that many
297:         seconds of inactivity. If set to ``0`` then the session will expire on
298:         browser close.
299: 
300:         If ``value`` is a ``datetime`` or ``timedelta`` object, the session
301:         will expire at that specific future time.
302: 
303:         If ``value`` is ``None``, the session uses the global session expiry
304:         policy.
305:         """
306:         if value is None:
307:             # Remove any custom expiration for this session.
308:             try:
309:                 del self['_session_expiry']
310:             except KeyError:
311:                 pass
312:             return
313:         if isinstance(value, timedelta):
314:             value = timezone.now() + value
315:         self['_session_expiry'] = value
316: 
317:     def get_expire_at_browser_close(self):
318:         """
319:         Return ``True`` if the session is set to expire when the browser
320:         closes, and ``False`` if there's an expiry date. Use
321:         ``get_expiry_date()`` or ``get_expiry_age()`` to find the actual expiry
322:         date/age, if there is one.
323:         """
324:         if self.get('_session_expiry') is None:
325:             return settings.SESSION_EXPIRE_AT_BROWSER_CLOSE
326:         return self.get('_session_expiry') == 0
327: 
328:     def flush(self):
329:         """
330:         Remove the current session data from the database and regenerate the
331:         key.
332:         """
333:         self.clear()
334:         self.delete()
335:         self._session_key = None
336: 
337:     def cycle_key(self):
338:         """
339:         Create a new session key, while retaining the current session data.
340:         """
341:         data = self._session
342:         key = self.session_key
343:         self.create()
344:         self._session_cache = data
345:         if key:
346:             self.delete(key)
347: 
348:     # Methods that child classes must implement.
349: 
350:     def exists(self, session_key):
351:         """
352:         Return True if the given session_key already exists.
353:         """
354:         raise NotImplementedError('subclasses of SessionBase must provide an exists() method')
355: 
356:     def create(self):
357:         """
358:         Create a new session instance. Guaranteed to create a new object with
359:         a unique key and will have saved the result once (with empty data)
360:         before the method returns.
361:         """
362:         raise NotImplementedError('subclasses of SessionBase must provide a create() method')
363: 
364:     def save(self, must_create=False):
365:         """
366:         Save the session data. If 'must_create' is True, create a new session
367:         object (or raise CreateError). Otherwise, only update an existing
368:         object and don't create one (raise UpdateError if needed).
369:         """
370:         raise NotImplementedError('subclasses of SessionBase must provide a save() method')
371: 
372:     def delete(self, session_key=None):
373:         """
374:         Delete the session data under this key. If the key is None, use the
375:         current session key value.
376:         """
377:         raise NotImplementedError('subclasses of SessionBase must provide a delete() method')
378: 
379:     def load(self):
380:         """
381:         Load the session data and return a dictionary.
382:         """
383:         raise NotImplementedError('subclasses of SessionBase must provide a load() method')
384: 
385:     @classmethod
386:     def clear_expired(cls):
387:         """
388:         Remove expired sessions from the session store.
389: 
390:         If this operation isn't possible on a given backend, it should raise
391:         NotImplementedError. If it isn't necessary, because the backend has
392:         a built-in expiration mechanism, it should be a no-op.
393:         """
394:         raise NotImplementedError('This backend does not support clear_expired().')
395: 
</content>
</file>
