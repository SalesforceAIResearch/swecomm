@generate /noformat

<test-errors>
activate successful
CONDA_EXE=/usr/share/miniconda/bin/conda
_CE_M=
PWD=/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1
CONDA_PREFIX=/usr/share/miniconda/envs/django__django__3.0-1
CONDA_PROMPT_MODIFIER=(django__django__3.0-1) 
_CE_CONDA=
CONDA_SHLVL=1
SHLVL=1
CONDA_PYTHON_EXE=/usr/share/miniconda/bin/python
CONDA_DEFAULT_ENV=django__django__3.0-1
CONDA_PKGS_DIRS=/usr/share/miniconda/cache
PATH=/usr/share/miniconda/envs/django__django__3.0-1/bin:/usr/share/miniconda/condabin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
_=/usr/bin/printenv
Testing against Django installed in '/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django' with up to 4 processes
Importing application admin_widgets
Importing application admin_inlines
Importing application forms_tests
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: admin_inlines, admin_widgets, auth, contenttypes, forms_tests, messages, sessions, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table admin_widgets_member
    Creating table admin_widgets_band
    Creating table admin_widgets_album
    Creating table admin_widgets_inventory
    Creating table admin_widgets_event
    Creating table admin_widgets_car
    Creating table admin_widgets_cartire
    Creating table admin_widgets_honeycomb
    Creating table admin_widgets_bee
    Creating table admin_widgets_individual
    Creating table admin_widgets_company
    Creating table admin_widgets_advisor
    Creating table admin_widgets_student
    Creating table admin_widgets_school
    Creating table admin_widgets_profile
    Creating table admin_inlines_parent
    Creating table admin_inlines_teacher
    Creating table admin_inlines_child
    Creating table admin_inlines_book
    Creating table admin_inlines_author
    Creating table admin_inlines_nonautopkbook
    Creating table admin_inlines_nonautopkbookchild
    Creating table admin_inlines_editablepkbook
    Creating table admin_inlines_holder
    Creating table admin_inlines_inner
    Creating table admin_inlines_holder2
    Creating table admin_inlines_inner2
    Creating table admin_inlines_holder3
    Creating table admin_inlines_inner3
    Creating table admin_inlines_holder4
    Creating table admin_inlines_inner4stacked
    Creating table admin_inlines_inner4tabular
    Creating table admin_inlines_person
    Creating table admin_inlines_outfititem
    Creating table admin_inlines_fashionista
    Creating table admin_inlines_shoppingweakness
    Creating table admin_inlines_titlecollection
    Creating table admin_inlines_title
    Creating table admin_inlines_poll
    Creating table admin_inlines_question
    Creating table admin_inlines_novel
    Creating table admin_inlines_chapter
    Creating table admin_inlines_footnote
    Creating table admin_inlines_capofamiglia
    Creating table admin_inlines_consigliere
    Creating table admin_inlines_sottocapo
    Creating table admin_inlines_readonlyinline
    Creating table admin_inlines_parentmodelwithcustompk
    Creating table admin_inlines_childmodel1
    Creating table admin_inlines_childmodel2
    Creating table admin_inlines_binarytree
    Creating table admin_inlines_lifeform
    Creating table admin_inlines_extraterrestrial
    Creating table admin_inlines_sighting
    Creating table admin_inlines_someparentmodel
    Creating table admin_inlines_somechildmodel
    Creating table admin_inlines_profilecollection
    Creating table admin_inlines_profile
    Creating table forms_tests_boundarymodel
    Creating table forms_tests_defaults
    Creating table forms_tests_choicemodel
    Creating table forms_tests_choiceoptionmodel
    Creating table forms_tests_choicefieldmodel
    Creating table forms_tests_optionalmultichoicemodel
    Creating table forms_tests_filemodel
    Creating table forms_tests_article
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (0 silenced).
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Cloning test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
test_immutable_content_type (admin_inlines.tests.TestInlineAdminForm)
Regression for #9362 ... ok
test_deleting_inline_with_protected_delete_does_not_validate (admin_inlines.tests.TestInlineProtectedOnDelete) ... ERROR
test_build_attrs (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_build_attrs_no_custom_class (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_build_attrs_not_required_field (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_build_attrs_required_field (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_get_url (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... test_render_options (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) ... ok
test_render_options_not_required_field (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests)
Empty option isn't present if the field isn't required. ... ok
test_render_options_required_field (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests)
Empty option is present if the field isn't required. ... ok
test_add_inlines (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_add_stackeds (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_alternating_rows (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_collapsed_inlines (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_delete_inlines (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_delete_stackeds (admin_inlines.tests.SeleniumTests) ... skipped 'No browsers specified.'
test_all_inline_media (admin_inlines.tests.TestInlineMedia) ... ERROR
test_inline_media_only_base (admin_inlines.tests.TestInlineMedia) ... ERROR
test_inline_media_only_inline (admin_inlines.tests.TestInlineMedia) ... ERROR
test_combine_media (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_construction (forms_tests.tests.test_media.FormsMediaTestCase) ... FAIL
test_form_media (forms_tests.tests.test_media.FormsMediaTestCase) ... FAIL
test_html_safe (forms_tests.tests.test_media.FormsMediaTestCase) ... ok
test_media_dsl (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_inheritance (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_inheritance_extends (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_inheritance_from_property (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_inheritance_single_type (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_property (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_media_property_parent_references (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_merge (forms_tests.tests.test_media.FormsMediaTestCase) ... test_merge_css_three_way (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_merge_js_three_way (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_merge_warning (forms_tests.tests.test_media.FormsMediaTestCase) ... FAIL
test_multi_media (forms_tests.tests.test_media.FormsMediaTestCase) ... ERROR
test_multi_widget (forms_tests.tests.test_media.FormsMediaTestCase) ... FAIL
test_inline_add_fk_add_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_add_fk_noperm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_add_m2m_add_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_add_m2m_noperm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_add_change_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_add_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_all_perms (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_change_del_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_change_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_fk_noperm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_m2m_add_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_m2m_change_perm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_inline_change_m2m_noperm (admin_inlines.tests.TestInlinePermissions) ... ERROR
test_callable_lookup (admin_inlines.tests.TestInline)
Admin inline should invoke local callable when its name is listed in readonly_fields ... ERROR
test_can_delete (admin_inlines.tests.TestInline) ... ERROR
test_create_inlines_on_inherited_model (admin_inlines.tests.TestInline) ... ok
test_custom_form_tabular_inline_label (admin_inlines.tests.TestInline) ... ERROR
test_custom_form_tabular_inline_overridden_label (admin_inlines.tests.TestInline) ... ERROR
test_custom_get_extra_form (admin_inlines.tests.TestInline) ... ERROR
test_custom_min_num (admin_inlines.tests.TestInline) ... ERROR
test_custom_pk_shortcut (admin_inlines.tests.TestInline) ... ERROR
test_help_text (admin_inlines.tests.TestInline) ... ERROR
test_inline_editable_pk (admin_inlines.tests.TestInline) ... ERROR
test_inline_hidden_field_no_column (admin_inlines.tests.TestInline)
#18263 -- Make sure hidden fields don't get a column in tabular inlines ... ERROR
test_inline_nonauto_noneditable_inherited_pk (admin_inlines.tests.TestInline) ... ERROR
test_inline_nonauto_noneditable_pk (admin_inlines.tests.TestInline) ... ERROR
test_inline_primary (admin_inlines.tests.TestInline) ... ok
test_inlines_show_change_link_registered (admin_inlines.tests.TestInline)
Inlines `show_change_link` for registered models when enabled. ... ERROR
test_inlines_show_change_link_unregistered (admin_inlines.tests.TestInline)
Inlines `show_change_link` disabled for unregistered models. ... ERROR
test_localize_pk_shortcut (admin_inlines.tests.TestInline) ... ERROR
test_many_to_many_inlines (admin_inlines.tests.TestInline)
Autogenerated many-to-many inlines are displayed correctly (#13407) ... ERROR
test_min_num (admin_inlines.tests.TestInline) ... ERROR
test_no_parent_callable_lookup (admin_inlines.tests.TestInline)
Admin inline `readonly_field` shouldn't invoke parent ModelAdmin callable ... ERROR
test_non_related_name_inline (admin_inlines.tests.TestInline) ... ERROR
test_noneditable_inline_has_field_inputs (admin_inlines.tests.TestInline)
Inlines without change permission shows field inputs on add form. ... ERROR
test_readonly_stacked_inline_label (admin_inlines.tests.TestInline)
Bug #13174. ... ERROR
test_stacked_inline_edit_form_contains_has_original_class (admin_inlines.tests.TestInline) ... ERROR
test_tabular_inline_column_css_class (admin_inlines.tests.TestInline) ... ERROR
test_tabular_inline_show_change_link_false_registered (admin_inlines.tests.TestInline)
Inlines `show_change_link` disabled by default. ... ERROR
test_tabular_model_form_meta_readonly_field (admin_inlines.tests.TestInline) ... ERROR
test_tabular_non_field_errors (admin_inlines.tests.TestInline) ... ERROR

======================================================================
ERROR: test_deleting_inline_with_protected_delete_does_not_validate (admin_inlines.tests.TestInlineProtectedOnDelete)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 549, in test_deleting_inline_with_protected_delete_does_not_validate
    response = self.client.get(change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_all_inline_media (admin_inlines.tests.TestInlineMedia)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 513, in test_all_inline_media
    response = self.client.get(change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_media_only_base (admin_inlines.tests.TestInlineMedia)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 487, in test_inline_media_only_base
    response = self.client.get(change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_media_only_inline (admin_inlines.tests.TestInlineMedia)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 495, in test_inline_media_only_inline
    response = self.client.get(change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_combine_media (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 122, in test_combine_media
    str(w1.media + w2.media + w3.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_media_dsl (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 72, in test_media_dsl
    str(w1.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/html.py", line 388, in <lambda>
    klass.__str__ = lambda self: mark_safe(klass_str(self))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 58, in __str__
    return self.render()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 79, in render
    return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 79, in <genexpr>
    return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 92, in render_css
    media = sorted(self._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_media_inheritance (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 226, in test_media_inheritance
    str(w7.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_media_inheritance_extends (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 319, in test_media_inheritance_extends
    str(w11.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_media_inheritance_from_property (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 278, in test_media_inheritance_from_property
    str(w9.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
all
all

======================================================================
ERROR: test_media_inheritance_single_type (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 348, in test_media_inheritance_single_type
    str(w12.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_media_property (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 176, in test_media_property
    self.assertEqual(str(w5.media), """<link href="/some/path" type="text/css" media="all" rel="stylesheet">
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 172, in _media
    return super().media + Media(css={'all': ('/other/path',)}, js=('/other/js',))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
all
all

======================================================================
ERROR: test_media_property_parent_references (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 198, in test_media_property_parent_references
    str(w6.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 193, in _media
    return super().media + Media(css={'all': ('/other/path',)}, js=('/other/js',))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_merge (forms_tests.tests.test_media.FormsMediaTestCase) [<object object at 0x7f58a6f9cb90>] (list1=[1, 2], list2=[2, 3])
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 538, in test_merge
    self.assertEqual(Media.merge(list1, list2), expected)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
2
2

======================================================================
ERROR: test_merge (forms_tests.tests.test_media.FormsMediaTestCase) [<object object at 0x7f58a6f9cb90>] (list1=[2, 3], list2=[1, 2])
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 538, in test_merge
    self.assertEqual(Media.merge(list1, list2), expected)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
1
2

======================================================================
ERROR: test_merge (forms_tests.tests.test_media.FormsMediaTestCase) [<object object at 0x7f58a6f9cb90>] (list1=[1, 3], list2=[2, 3])
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 538, in test_merge
    self.assertEqual(Media.merge(list1, list2), expected)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
2
3

======================================================================
ERROR: test_merge (forms_tests.tests.test_media.FormsMediaTestCase) [<object object at 0x7f58a6f9cb90>] (list1=[1, 2], list2=[1, 3])
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 538, in test_merge
    self.assertEqual(Media.merge(list1, list2), expected)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
2
1

======================================================================
ERROR: test_merge (forms_tests.tests.test_media.FormsMediaTestCase) [<object object at 0x7f58a6f9cb90>] (list1=[1, 2], list2=[3, 2])
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 538, in test_merge
    self.assertEqual(Media.merge(list1, list2), expected)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
3
2

======================================================================
ERROR: test_merge_css_three_way (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 565, in test_merge_css_three_way
    form1 = widget1 + widget2
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
screen
screen

======================================================================
ERROR: test_merge_js_three_way (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 555, in test_merge_js_three_way
    self.assertEqual(form_media._js, ['custom_widget.js', 'jquery.js', 'uses_jquery.js'])
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 75, in _js
    js = self.merge(js, js_list)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 139, in merge
    MediaOrderConflictWarning,
django.forms.widgets.MediaOrderConflictWarning: Detected duplicate Media files in an opposite order:
custom_widget.js
custom_widget.js

======================================================================
ERROR: test_multi_media (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 373, in test_multi_media
    str(multimedia.media),
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/html.py", line 388, in <lambda>
    klass.__str__ = lambda self: mark_safe(klass_str(self))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 58, in __str__
    return self.render()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 79, in render
    return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 79, in <genexpr>
    return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 92, in render_css
    media = sorted(self._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_add_fk_add_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 651, in test_inline_add_fk_add_perm
    response = self.client.get(reverse('admin:admin_inlines_holder2_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_add_fk_noperm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 619, in test_inline_add_fk_noperm
    response = self.client.get(reverse('admin:admin_inlines_holder2_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_add_m2m_add_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 642, in test_inline_add_m2m_add_perm
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_add_m2m_noperm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 612, in test_inline_add_m2m_noperm
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_add_change_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 741, in test_inline_change_fk_add_change_perm
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_add_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 688, in test_inline_change_fk_add_perm
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_all_perms (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 783, in test_inline_change_fk_all_perms
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_change_del_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 760, in test_inline_change_fk_change_del_perm
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_change_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 708, in test_inline_change_fk_change_perm
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_fk_noperm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 633, in test_inline_change_fk_noperm
    response = self.client.get(self.holder_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_m2m_add_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 661, in test_inline_change_m2m_add_perm
    response = self.client.get(self.author_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_m2m_change_perm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 671, in test_inline_change_m2m_change_perm
    response = self.client.get(self.author_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_change_m2m_noperm (admin_inlines.tests.TestInlinePermissions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 626, in test_inline_change_m2m_noperm
    response = self.client.get(self.author_change_url)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_callable_lookup (admin_inlines.tests.TestInline)
Admin inline should invoke local callable when its name is listed in readonly_fields
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 156, in test_callable_lookup
    response = self.client.get(reverse('admin:admin_inlines_poll_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_can_delete (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 46, in test_can_delete
    reverse('admin:admin_inlines_holder_change', args=(self.holder.id,))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_custom_form_tabular_inline_label (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 108, in test_custom_form_tabular_inline_label
    response = self.client.get(reverse('admin:admin_inlines_titlecollection_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_custom_form_tabular_inline_overridden_label (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 116, in test_custom_form_tabular_inline_overridden_label
    response = self.client.get(reverse('admin:admin_inlines_someparentmodel_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_custom_get_extra_form (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 305, in test_custom_get_extra_form
    response = self.client.get(reverse('admin:admin_inlines_binarytree_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_custom_min_num (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 363, in test_custom_min_num
    response = modeladmin.changeform_view(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_custom_pk_shortcut (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 269, in test_custom_pk_shortcut
    response = self.client.get(reverse('admin:admin_inlines_parentmodelwithcustompk_change', args=('foo',)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_help_text (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 172, in test_help_text
    response = self.client.get(reverse('admin:admin_inlines_holder4_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_editable_pk (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 404, in test_inline_editable_pk
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_hidden_field_no_column (admin_inlines.tests.TestInline)
#18263 -- Make sure hidden fields don't get a column in tabular inlines
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 213, in test_inline_hidden_field_no_column
    response = self.client.get(reverse('admin:admin_inlines_someparentmodel_change', args=(parent.pk,)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_nonauto_noneditable_inherited_pk (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 389, in test_inline_nonauto_noneditable_inherited_pk
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inline_nonauto_noneditable_pk (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 374, in test_inline_nonauto_noneditable_pk
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inlines_show_change_link_registered (admin_inlines.tests.TestInline)
Inlines `show_change_link` for registered models when enabled.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 442, in test_inlines_show_change_link_registered
    response = self.client.get(reverse('admin:admin_inlines_holder4_change', args=(holder.pk,)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_inlines_show_change_link_unregistered (admin_inlines.tests.TestInline)
Inlines `show_change_link` disabled for unregistered models.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 453, in test_inlines_show_change_link_unregistered
    response = self.client.get(reverse('admin:admin_inlines_parentmodelwithcustompk_change', args=('foo',)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_localize_pk_shortcut (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/utils.py", line 371, in inner
    return func(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 257, in test_localize_pk_shortcut
    response = self.client.get(reverse('admin:admin_inlines_holder_change', args=(holder.id,)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_many_to_many_inlines (admin_inlines.tests.TestInline)
Autogenerated many-to-many inlines are displayed correctly (#13407)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 64, in test_many_to_many_inlines
    response = self.client.get(reverse('admin:admin_inlines_author_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_min_num (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 334, in test_min_num
    response = modeladmin.changeform_view(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_no_parent_callable_lookup (admin_inlines.tests.TestInline)
Admin inline `readonly_field` shouldn't invoke parent ModelAdmin callable
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 146, in test_no_parent_callable_lookup
    response = self.client.get(reverse('admin:admin_inlines_novel_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_non_related_name_inline (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 225, in test_non_related_name_inline
    response = self.client.get(reverse('admin:admin_inlines_capofamiglia_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_noneditable_inline_has_field_inputs (admin_inlines.tests.TestInline)
Inlines without change permission shows field inputs on add form.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 467, in test_noneditable_inline_has_field_inputs
    response = self.client.get(reverse('admin:admin_inlines_novelreadonlychapter_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_readonly_stacked_inline_label (admin_inlines.tests.TestInline)
Bug #13174.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 58, in test_readonly_stacked_inline_label
    reverse('admin:admin_inlines_holder_change', args=(holder.id,))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_stacked_inline_edit_form_contains_has_original_class (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 421, in test_stacked_inline_edit_form_contains_has_original_class
    response = self.client.get(reverse('admin:admin_inlines_holder_change', args=(holder.pk,)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 174, in _media
    return base + new_media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_tabular_inline_column_css_class (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 94, in test_tabular_inline_column_css_class
    response = self.client.get(reverse('admin:admin_inlines_poll_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_tabular_inline_show_change_link_false_registered (admin_inlines.tests.TestInline)
Inlines `show_change_link` disabled by default.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 461, in test_tabular_inline_show_change_link_false_registered
    response = self.client.get(reverse('admin:admin_inlines_poll_change', args=(poll.pk,)))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1627, in change_view
    return self.changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_tabular_model_form_meta_readonly_field (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 198, in test_tabular_model_form_meta_readonly_field
    response = self.client.get(reverse('admin:admin_inlines_someparentmodel_add'))
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 538, in get
    response = super().get(path, data=data, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 347, in get
    **extra,
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/helpers.py", line 66, in media
    media = media + fs.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
ERROR: test_tabular_non_field_errors (admin_inlines.tests.TestInline)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_inlines/tests.py", line 134, in test_tabular_non_field_errors
    response = self.client.post(reverse('admin:admin_inlines_titlecollection_add'), data)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 546, in post
    response = super().post(path, data=data, content_type=content_type, secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 357, in post
    secure=secure, **extra)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 422, in generic
    return self.request(**r)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/client.py", line 506, in request
    raise exc_value
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/exception.py", line 34, in inner
    response = get_response(request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/core/handlers/base.py", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 603, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/views/decorators/cache.py", line 44, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/sites.py", line 223, in inner
    return view(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1624, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 43, in _wrapper
    return bound_method(*args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/utils/decorators.py", line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1512, in changeform_view
    return self._changeform_view(request, object_id, form_url, extra_context)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/contrib/admin/options.py", line 1582, in _changeform_view
    media = self.media + adminForm.media
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 154, in __add__
    combined._css_lists[-1] = combined.merge(self._css, other._css)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/forms/widgets.py", line 64, in _css
    for key, value in css_list.items():
AttributeError: 'list' object has no attribute 'items'

======================================================================
FAIL: test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) [<object object at 0x7f58a6f9cb70>] (lang='de')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_widgets/test_autocomplete_widget.py", line 142, in test_media
    self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, expected_files)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: ['admin/js/vendor/jquery/jquery.min.js', [134 chars].js'] != ('admin/js/vendor/jquery/jquery.min.js', [134 chars].js')

======================================================================
FAIL: test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) [<object object at 0x7f58a6f9cb70>] (lang='00')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_widgets/test_autocomplete_widget.py", line 142, in test_media
    self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, expected_files)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: ['admin/js/vendor/jquery/jquery.min.js', [96 chars].js'] != ('admin/js/vendor/jquery/jquery.min.js', [96 chars].js')

======================================================================
FAIL: test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) [<object object at 0x7f58a6f9cb70>] (lang='sr-cyrl')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_widgets/test_autocomplete_widget.py", line 142, in test_media
    self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, expected_files)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: ['admin/js/vendor/jquery/jquery.min.js', [139 chars].js'] != ('admin/js/vendor/jquery/jquery.min.js', [139 chars].js')

======================================================================
FAIL: test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) [<object object at 0x7f58a6f9cb70>] (lang='zh-hans')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_widgets/test_autocomplete_widget.py", line 142, in test_media
    self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, expected_files)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: ['admin/js/vendor/jquery/jquery.min.js', [137 chars].js'] != ('admin/js/vendor/jquery/jquery.min.js', [137 chars].js')

======================================================================
FAIL: test_media (admin_widgets.test_autocomplete_widget.AutocompleteMixinTests) [<object object at 0x7f58a6f9cb70>] (lang='zh-hant')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 523, in subTest
    yield
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/admin_widgets/test_autocomplete_widget.py", line 142, in test_media
    self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, expected_files)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: ['admin/js/vendor/jquery/jquery.min.js', [137 chars].js'] != ('admin/js/vendor/jquery/jquery.min.js', [137 chars].js')

======================================================================
FAIL: test_construction (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 28, in test_construction
    "Media(css={'all': ('path/to/css1', '/path/to/css2')}, "
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 1203, in assertMultiLineEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: "Medi[48 chars], js=['/path/to/js1', 'http://media.other.com/[50 chars]3'])" != "Medi[48 chars], js=('/path/to/js1', 'http://media.other.com/[50 chars]3'))"
- Media(css={'all': ('path/to/css1', '/path/to/css2')}, js=['/path/to/js1', 'http://media.other.com/path/to/js2', 'https://secure.other.com/path/to/js3'])
?                                                          ^                                                                                            ^
+ Media(css={'all': ('path/to/css1', '/path/to/css2')}, js=('/path/to/js1', 'http://media.other.com/path/to/js2', 'https://secure.other.com/path/to/js3'))
?                                                          ^                                                                                            ^


======================================================================
FAIL: test_form_media (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 466, in test_form_media
    <script type="text/javascript" src="/path/to/js4"></script>"""
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: '' != '<link href="http://media.example.com/stat[496 chars]ipt>'

======================================================================
FAIL: test_merge_warning (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 543, in test_merge_warning
    self.assertEqual(Media.merge([1, 2], [2, 1]), [1, 2])
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/contextlib.py", line 88, in __exit__
    next(self.gen)
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/django/test/testcases.py", line 676, in _assert_raises_or_warns_cm
    self.assertIn(expected_message, str(getattr(cm, cm_attr)))
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 1089, in assertIn
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 670, in fail
    raise self.failureException(msg)
AssertionError: 'Detected duplicate Media files in an opposite order:\n1\n2' not found in 'Detected duplicate Media files in an opposite order:\n2\n2'

======================================================================
FAIL: test_multi_widget (forms_tests.tests.test_media.FormsMediaTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 59, in testPartExecutor
    yield
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 605, in run
    testMethod()
  File "/home/runner/work/_temp/tmp48hyvq56/django__django__3.0-1/tests/forms_tests/tests/test_media.py", line 424, in test_multi_widget
    <script type="text/javascript" src="/path/to/js4"></script>"""
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 829, in assertEqual
    assertion_func(first, second, msg=msg)
  File "/usr/share/miniconda/envs/django__django__3.0-1/lib/python3.6/unittest/case.py", line 822, in _baseAssertEqual
    raise self.failureException(msg)
AssertionError: '' != '<link href="http://media.example.com/stat[496 chars]ipt>'

----------------------------------------------------------------------
Ran 78 tests in 1.035s

FAILED (failures=9, errors=59, skipped=6)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...

</test-errors>

<file>
<path>django/forms/widgets.py</path>
<content>
1: """
2: HTML Widget classes
3: """
4: 
5: import copy
6: import datetime
7: import re
8: import warnings
9: from itertools import chain
10: 
11: from django.conf import settings
12: from django.forms.utils import to_current_timezone
13: from django.templatetags.static import static
14: from django.utils import datetime_safe, formats
15: from django.utils.dates import MONTHS
16: from django.utils.formats import get_format
17: from django.utils.html import format_html, html_safe
18: from django.utils.safestring import mark_safe
19: from django.utils.translation import gettext_lazy as _
20: 
21: from .renderers import get_default_renderer
22: 
23: __all__ = (
24:     'Media', 'MediaDefiningClass', 'Widget', 'TextInput', 'NumberInput',
25:     'EmailInput', 'URLInput', 'PasswordInput', 'HiddenInput',
26:     'MultipleHiddenInput', 'FileInput', 'ClearableFileInput', 'Textarea',
27:     'DateInput', 'DateTimeInput', 'TimeInput', 'CheckboxInput', 'Select',
28:     'NullBooleanSelect', 'SelectMultiple', 'RadioSelect',
29:     'CheckboxSelectMultiple', 'MultiWidget', 'SplitDateTimeWidget',
30:     'SplitHiddenDateTimeWidget', 'SelectDateWidget',
31: )
32: 
33: MEDIA_TYPES = ('css', 'js')
34: 
35: 
36: class MediaOrderConflictWarning(RuntimeWarning):
37:     pass
38: 
39: 
40: @html_safe
41: class Media:
42:     def __init__(self, media=None, css=None, js=None):
43:         if media is not None:
44:             css = getattr(media, 'css', {})
45:             js = getattr(media, 'js', [])
46:         else:
47:             if css is None:
48:                 css = {}
49:             if js is None:
50:                 js = []
51:         self._css_lists = [css]
52:         self._js_lists = [js]
53: 
54:     def __repr__(self):
55:         return 'Media(css=%r, js=%r)' % (self._css, self._js)
56: 
57:     def __str__(self):
58:         return self.render()
59: 
60:     @property
61:     def _css(self):
62:         css = {}
63:         for css_list in self._css_lists:
64:             for key, value in css_list.items():
65:                 if key in css:
66:                     css[key] = self.merge(css[key], value)
67:                 else:
68:                     css[key] = value
69:         return css
70: 
71:     @property
72:     def _js(self):
73:         js = []
74:         for js_list in self._js_lists:
75:             js = self.merge(js, js_list)
76:         return js
77: 
78:     def render(self):
79:         return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
80: 
81:     def render_js(self):
82:         return [
83:             format_html(
84:                 '<script type="text/javascript" src="{}"></script>',
85:                 self.absolute_path(path)
86:             ) for path in self._js
87:         ]
88: 
89:     def render_css(self):
90:         # To keep rendering order consistent, we can't just iterate over items().
91:         # We need to sort the keys, and iterate over the sorted list.
92:         media = sorted(self._css)
93:         return chain.from_iterable([
94:             format_html(
95:                 '<link href="{}" type="text/css" media="{}" rel="stylesheet">',
96:                 self.absolute_path(path), medium
97:             ) for path in self._css[medium]
98:         ] for medium in media)
99: 
100:     def absolute_path(self, path):
101:         """
102:         Given a relative or absolute path to a static asset, return an absolute
103:         path. An absolute path will be returned unchanged while a relative path
104:         will be passed to django.templatetags.static.static().
105:         """
106:         if path.startswith(('http://', 'https://', '/')):
107:             return path
108:         return static(path)
109: 
110:     def __getitem__(self, name):
111:         """Return a Media object that only contains media of the given type."""
112:         if name in MEDIA_TYPES:
113:             return Media(**{str(name): getattr(self, '_' + name)})
114:         raise KeyError('Unknown media type "%s"' % name)
115: 
116:     @staticmethod
117:     def merge(list_1, list_2):
118:         """
119:         Merge two lists considering dependencies while trying to keep the relative order 
120:         of elements. Warn if the lists have the same two elements in a different relative order.
121: 
122:         For static assets it can be important to have them included in the DOM in a certain order. 
123:         For example, in JavaScript, you may not be able to reference a global or in CSS you might want 
124:         to override a style.
125:         """
126:         # List to hold the merged result
127:         combined_list = list(list_1)
128:         insert_point = len(list_1)
129: 
130:         # Walk through list_2 and insert its elements into combined_list if they don't already exist.
131:         # If they exist in different order, warn the user.
132:         for path in list_2:
133:             if path in combined_list:
134:                 current_index = combined_list.index(path)
135:                 if current_index < insert_point:
136:                     warnings.warn(
137:                         'Detected duplicate Media files in an opposite order:\n'
138:                         '%s\n%s' % (combined_list[insert_point - 1], path),
139:                         MediaOrderConflictWarning,
140:                     )
141:                 insert_point = current_index + 1
142:             else:
143:                 combined_list.insert(insert_point, path)
144:                 insert_point += 1
145: 
146:         return combined_list
147: 
148:     def __add__(self, other):
149:         combined = Media()
150:         combined._css_lists = self._css_lists + other._css_lists
151:         combined._js_lists = self._js_lists + other._js_lists
152: 
153:         # Merge gathered CSS and JS lists correctly
154:         combined._css_lists[-1] = combined.merge(self._css, other._css)
155:         combined._js_lists[-1] = combined.merge(self._js, other._js)
156: 
157:         return combined
158: 
159: 
160: def media_property(cls):
161:     def _media(self):
162:         # Get the media property of the superclass, if it exists
163:         sup_cls = super(cls, self)
164:         try:
165:             base = sup_cls.media
166:         except AttributeError:
167:             base = Media()
168:         
169:         # Get the media definition for this class
170:         definition = getattr(cls, 'Media', None)
171:         if definition:
172:             new_media = Media(definition)
173:             if getattr(definition, 'extend', True):
174:                 return base + new_media
175:             else:
176:                 return new_media
177:         return base
178:     return property(_media)
179: 
180: 
181: class MediaDefiningClass(type):
182:     """
183:     Metaclass for classes that can have media definitions.
184:     """
185:     def __new__(mcs, name, bases, attrs):
186:         new_class = super(MediaDefiningClass, mcs).__new__(mcs, name, bases, attrs)
187: 
188:         if 'media' not in attrs:
189:             new_class.media = media_property(new_class)
190: 
191:         return new_class
192: 
193: 
194: class Widget(metaclass=MediaDefiningClass):
195:     needs_multipart_form = False  # Determines does this widget need multipart form
196:     is_localized = False
197:     is_required = False
198:     supports_microseconds = True
199: 
200:     def __init__(self, attrs=None):
201:         self.attrs = {} if attrs is None else attrs.copy()
202: 
203:     def __deepcopy__(self, memo):
204:         obj = copy.copy(self)
205:         obj.attrs = self.attrs.copy()
206:         memo[id(self)] = obj
207:         return obj
208: 
209:     @property
210:     def is_hidden(self):
211:         return self.input_type == 'hidden' if hasattr(self, 'input_type') else False
212: 
213:     def subwidgets(self, name, value, attrs=None):
214:         context = self.get_context(name, value, attrs)
215:         yield context['widget']
216: 
217:     def format_value(self, value):
218:         """
219:         Return a value as it should appear when rendered in a template.
220:         """
221:         if value == '' or value is None:
222:             return None
223:         if self.is_localized:
224:             return formats.localize_input(value)
225:         return str(value)
226: 
227:     def get_context(self, name, value, attrs):
228:         context = {}
229:         context['widget'] = {
230:             'name': name,
231:             'is_hidden': self.is_hidden,
232:             'required': self.is_required,
233:             'value': self.format_value(value),
234:             'attrs': self.build_attrs(self.attrs, attrs),
235:             'template_name': self.template_name,
236:         }
237:         return context
238: 
239:     def render(self, name, value, attrs=None, renderer=None):
240:         """Render the widget as an HTML string."""
241:         context = self.get_context(name, value, attrs)
242:         return self._render(self.template_name, context, renderer)
243: 
244:     def _render(self, template_name, context, renderer=None):
245:         if renderer is None:
246:             renderer = get_default_renderer()
247:         return mark_safe(renderer.render(template_name, context))
248: 
249:     def build_attrs(self, base_attrs, extra_attrs=None):
250:         """Build an attribute dictionary."""
251:         return {**base_attrs, **(extra_attrs or {})}
252: 
253:     def value_from_datadict(self, data, files, name):
254:         """
255:         Given a dictionary of data and this widget's name, return the value
256:         of this widget or None if it's not provided.
257:         """
258:         return data.get(name)
259: 
260:     def value_omitted_from_data(self, data, files, name):
261:         return name not in data
262: 
263:     def id_for_label(self, id_):
264:         """
265:         Return the HTML ID attribute of this Widget for use by a <label>,
266:         given the ID of the field. Return None if no ID is available.
267: 
268:         This hook is necessary because some widgets have multiple HTML
269:         elements and, thus, multiple IDs. In that case, this method should
270:         return an ID value that corresponds to the first ID in the widget's
271:         tags.
272:         """
273:         return id_
274: 
275:     def use_required_attribute(self, initial):
276:         return not self.is_hidden
277: 
278: 
279: class Input(Widget):
280:     """
281:     Base class for all <input> widgets.
282:     """
283:     input_type = None  # Subclasses must define this.
284:     template_name = 'django/forms/widgets/input.html'
285: 
286:     def __init__(self, attrs=None):
287:         if attrs is not None:
288:             attrs = attrs.copy()
289:             self.input_type = attrs.pop('type', self.input_type)
290:         super().__init__(attrs)
291: 
292:     def get_context(self, name, value, attrs):
293:         context = super().get_context(name, value, attrs)
294:         context['widget']['type'] = self.input_type
295:         return context
296: 
297: 
298: class TextInput(Input):
299:     input_type = 'text'
300:     template_name = 'django/forms/widgets/text.html'
301: 
302: 
303: class NumberInput(Input):
304:     input_type = 'number'
305:     template_name = 'django/forms/widgets/number.html'
306: 
307: 
308: class EmailInput(Input):
309:     input_type = 'email'
310:     template_name = 'django/forms/widgets/email.html'
311: 
312: 
313: class URLInput(Input):
314:     input_type = 'url'
315:     template_name = 'django/forms/widgets/url.html'
316: 
317: 
318: class PasswordInput(Input):
319:     input_type = 'password'
320:     template_name = 'django/forms/widgets/password.html'
321: 
322:     def __init__(self, attrs=None, render_value=False):
323:         super().__init__(attrs)
324:         self.render_value = render_value
325: 
326:     def get_context(self, name, value, attrs):
327:         if not self.render_value:
328:             value = None
329:         return super().get_context(name, value, attrs)
330: 
331: 
332: class HiddenInput(Input):
333:     input_type = 'hidden'
334:     template_name = 'django/forms/widgets/hidden.html'
335: 
336: 
337: class MultipleHiddenInput(HiddenInput):
338:     """
339:     Handle <input type="hidden"> for fields that have a list
340:     of values.
341:     """
342:     template_name = 'django/forms/widgets/multiple_hidden.html'
343: 
344:     def get_context(self, name, value, attrs):
345:         context = super().get_context(name, value, attrs)
346:         final_attrs = context['widget']['attrs']
347:         id_ = context['widget']['attrs'].get('id')
348: 
349:         subwidgets = []
350:         for index, value_ in enumerate(context['widget']['value']):
351:             widget_attrs = final_attrs.copy()
352:             if id_:
353:                 # An ID attribute was given. Add a numeric index as a suffix
354:                 # so that the inputs don't all have the same ID attribute.
355:                 widget_attrs['id'] = '%s_%s' % (id_, index)
356:             widget = HiddenInput()
357:             widget.is_required = self.is_required
358:             subwidgets.append(widget.get_context(name, value_, widget_attrs)['widget'])
359: 
360:         context['widget']['subwidgets'] = subwidgets
361:         return context
362: 
363:     def value_from_datadict(self, data, files, name):
364:         try:
365:             getter = data.getlist
366:         except AttributeError:
367:             getter = data.get
368:         return getter(name)
369: 
370:     def format_value(self, value):
371:         return [] if value is None else value
372: 
373: 
374: class FileInput(Input):
375:     input_type = 'file'
376:     needs_multipart_form = True
377:     template_name = 'django/forms/widgets/file.html'
378: 
379:     def format_value(self, value):
380:         """File input never renders a value."""
381:         return
382: 
383:     def value_from_datadict(self, data, files, name):
384:         "File widgets take data from FILES, not POST"
385:         return files.get(name)
386: 
387:     def value_omitted_from_data(self, data, files, name):
388:         return name not in files
389: 
390: 
391: FILE_INPUT_CONTRADICTION = object()
392: 
393: 
394: class ClearableFileInput(FileInput):
395:     clear_checkbox_label = _('Clear')
396:     initial_text = _('Currently')
397:     input_text = _('Change')
398:     template_name = 'django/forms/widgets/clearable_file_input.html'
399: 
400:     def clear_checkbox_name(self, name):
401:         """
402:         Given the name of the file input, return the name of the clear checkbox
403:         input.
404:         """
405:         return name + '-clear'
406: 
407:     def clear_checkbox_id(self, name):
408:         """
409:         Given the name of the clear checkbox input, return the HTML id for it.
410:         """
411:         return name + '_id'
412: 
413:     def is_initial(self, value):
414:         """
415:         Return whether value is considered to be initial value.
416:         """
417:         return bool(value and getattr(value, 'url', False))
418: 
419:     def format_value(self, value):
420:         """
421:         Return the file object if it has a defined url attribute.
422:         """
423:         if self.is_initial(value):
424:             return value
425: 
426:     def get_context(self, name, value, attrs):
427:         context = super().get_context(name, value, attrs)
428:         checkbox_name = self.clear_checkbox_name(name)
429:         checkbox_id = self.clear_checkbox_id(checkbox_name)
430:         context['widget'].update({
431:             'checkbox_name': checkbox_name,
432:             'checkbox_id': checkbox_id,
433:             'is_initial': self.is_initial(value),
434:             'input_text': self.input_text,
435:             'initial_text': self.initial_text,
436:             'clear_checkbox_label': self.clear_checkbox_label,
437:         })
438:         return context
439: 
440:     def value_from_datadict(self, data, files, name):
441:         upload = super().value_from_datadict(data, files, name)
442:         if not self.is_required and CheckboxInput().value_from_datadict(
443:                 data, files, self.clear_checkbox_name(name)):
444: 
445:             if upload:
446:                 # If the user contradicts themselves (uploads a new file AND
447:                 # checks the "clear" checkbox), we return a unique marker
448:                 # object that FileField will turn into a ValidationError.
449:                 return FILE_INPUT_CONTRADICTION
450:             # False signals to clear any existing value, as opposed to just None
451:             return False
452:         return upload
453: 
454:     def use_required_attribute(self, initial):
455:         return super().use_required_attribute(initial) and not initial
456: 
457:     def value_omitted_from_data(self, data, files, name):
458:         return (
459:             super().value_omitted_from_data(data, files, name) and
460:             self.clear_checkbox_name(name) not in data
461:         )
462: 
463: 
464: class Textarea(Widget):
465:     template_name = 'django/forms/widgets/textarea.html'
466: 
467:     def __init__(self, attrs=None):
468:         # Use slightly better defaults than HTML's 20x2 box
469:         default_attrs = {'cols': '40', 'rows': '10'}
470:         if attrs:
471:             default_attrs.update(attrs)
472:         super().__init__(default_attrs)
473: 
474: 
475: class DateTimeBaseInput(TextInput):
476:     format_key = ''
477:     supports_microseconds = False
478: 
479:     def __init__(self, attrs=None, format=None):
480:         super().__init__(attrs)
481:         self.format = format or None
482: 
483:     def format_value(self, value):
484:         return formats.localize_input(value, self.format or formats.get_format(self.format_key)[0])
485: 
486: 
487: class DateInput(DateTimeBaseInput):
488:     format_key = 'DATE_INPUT_FORMATS'
489:     template_name = 'django/forms/widgets/date.html'
490: 
491: 
492: class DateTimeInput(DateTimeBaseInput):
493:     format_key = 'DATETIME_INPUT_FORMATS'
494:     template_name = 'django/forms/widgets/datetime.html'
495: 
496: 
497: class TimeInput(DateTimeBaseInput):
498:     format_key = 'TIME_INPUT_FORMATS'
499:     template_name = 'django/forms/widgets/time.html'
500: 
501: 
502: # Defined at module level so that CheckboxInput is picklable (#17976)
503: def boolean_check(v):
504:     return not (v is False or v is None or v == '')
505: 
506: 
507: class CheckboxInput(Input):
508:     input_type = 'checkbox'
509:     template_name = 'django/forms/widgets/checkbox.html'
510: 
511:     def __init__(self, attrs=None, check_test=None):
512:         super().__init__(attrs)
513:         # check_test is a callable that takes a value and returns True
514:         # if the checkbox should be checked for that value.
515:         self.check_test = boolean_check if check_test is None else check_test
516: 
517:     def format_value(self, value):
518:         """Only return the 'value' attribute if value isn't empty."""
519:         if value is True or value is False or value is None or value == '':
520:             return
521:         return str(value)
522: 
523:     def get_context(self, name, value, attrs):
524:         if self.check_test(value):
525:             if attrs is None:
526:                 attrs = {}
527:             attrs['checked'] = True
528:         return super().get_context(name, value, attrs)
529: 
530:     def value_from_datadict(self, data, files, name):
531:         if name not in data:
532:             # A missing value means False because HTML form submission does not
533:             # send results for unselected checkboxes.
534:             return False
535:         value = data.get(name)
536:         # Translate true and false strings to boolean values.
537:         values = {'true': True, 'false': False}
538:         if isinstance(value, str):
539:             value = values.get(value.lower(), value)
540:         return bool(value)
541: 
542:     def value_omitted_from_data(self, data, files, name):
543:         # HTML checkboxes don't appear in POST data if not checked, so it's
544:         # never known if the value is actually omitted.
545:         return False
546: 
547: 
548: class ChoiceWidget(Widget):
549:     allow_multiple_selected = False
550:     input_type = None
551:     template_name = None
552:     option_template_name = None
553:     add_id_index = True
554:     checked_attribute = {'checked': True}
555:     option_inherits_attrs = True
556: 
557:     def __init__(self, attrs=None, choices=()):
558:         super().__init__(attrs)
559:         # choices can be any iterable, but we may need to render this widget
560:         # multiple times. Thus, collapse it into a list so it can be consumed
561:         # more than once.
562:         self.choices = list(choices)
563: 
564:     def __deepcopy__(self, memo):
565:         obj = copy.copy(self)
566:         obj.attrs = self.attrs.copy()
567:         obj.choices = copy.copy(self.choices)
568:         memo[id(self)] = obj
569:         return obj
570: 
571:     def subwidgets(self, name, value, attrs=None):
572:         """
573:         Yield all "subwidgets" of this widget. Used to enable iterating
574:         options from a BoundField for choice widgets.
575:         """
576:         value = self.format_value(value)
577:         yield from self.options(name, value, attrs)
578: 
579:     def options(self, name, value, attrs=None):
580:         """Yield a flat list of options for this widgets."""
581:         for group in self.optgroups(name, value, attrs):
582:             yield from group[1]
583: 
584:     def optgroups(self, name, value, attrs=None):
585:         """Return a list of optgroups for this widget."""
586:         groups = []
587:         has_selected = False
588: 
589:         for index, (option_value, option_label) in enumerate(self.choices):
590:             if option_value is None:
591:                 option_value = ''
592: 
593:             subgroup = []
594:             if isinstance(option_label, (list, tuple)):
595:                 group_name = option_value
596:                 subindex = 0
597:                 choices = option_label
598:             else:
599:                 group_name = None
600:                 subindex = None
601:                 choices = [(option_value, option_label)]
602:             groups.append((group_name, subgroup, index))
603: 
604:             for subvalue, sublabel in choices:
605:                 selected = (
606:                     str(subvalue) in value and
607:                     (not has_selected or self.allow_multiple_selected)
608:                 )
609:                 has_selected |= selected
610:                 subgroup.append(self.create_option(
611:                     name, subvalue, sublabel, selected, index,
612:                     subindex=subindex, attrs=attrs,
613:                 ))
614:                 if subindex is not None:
615:                     subindex += 1
616:         return groups
617: 
618:     def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
619:         index = str(index) if subindex is None else "%s_%s" % (index, subindex)
620:         if attrs is None:
621:             attrs = {}
622:         option_attrs = self.build_attrs(self.attrs, attrs) if self.option_inherits_attrs else {}
623:         if selected:
624:             option_attrs.update(self.checked_attribute)
625:         if 'id' in option_attrs:
626:             option_attrs['id'] = self.id_for_label(option_attrs['id'], index)
627:         return {
628:             'name': name,
629:             'value': value,
630:             'label': label,
631:             'selected': selected,
632:             'index': index,
633:             'attrs': option_attrs,
634:             'type': self.input_type,
635:             'template_name': self.option_template_name,
636:             'wrap_label': True,
637:         }
638: 
639:     def get_context(self, name, value, attrs):
640:         context = super().get_context(name, value, attrs)
641:         context['widget']['optgroups'] = self.optgroups(name, context['widget']['value'], attrs)
642:         return context
643: 
644:     def id_for_label(self, id_, index='0'):
645:         """
646:         Use an incremented id for each option where the main widget
647:         references the zero index.
648:         """
649:         if id_ and self.add_id_index:
650:             id_ = '%s_%s' % (id_, index)
651:         return id_
652: 
653:     def value_from_datadict(self, data, files, name):
654:         getter = data.get
655:         if self.allow_multiple_selected:
656:             try:
657:                 getter = data.getlist
658:             except AttributeError:
659:                 pass
660:         return getter(name)
661: 
662:     def format_value(self, value):
663:         """Return selected values as a list."""
664:         if value is None and self.allow_multiple_selected:
665:             return []
666:         if not isinstance(value, (tuple, list)):
667:             value = [value]
668:         return [str(v) if v is not None else '' for v in value]
669: 
670: 
671: class Select(ChoiceWidget):
672:     input_type = 'select'
673:     template_name = 'django/forms/widgets/select.html'
674:     option_template_name = 'django/forms/widgets/select_option.html'
675:     add_id_index = False
676:     checked_attribute = {'selected': True}
677:     option_inherits_attrs = False
678: 
679:     def get_context(self, name, value, attrs):
680:         context = super().get_context(name, value, attrs)
681:         if self.allow_multiple_selected:
682:             context['widget']['attrs']['multiple'] = True
683:         return context
684: 
685:     @staticmethod
686:     def _choice_has_empty_value(choice):
687:         """Return True if the choice's value is empty string or None."""
688:         value, _ = choice
689:         return value is None or value == ''
690: 
691:     def use_required_attribute(self, initial):
692:         """
693:         Don't render 'required' if the first <option> has a value, as that's
694:         invalid HTML.
695:         """
696:         use_required_attribute = super().use_required_attribute(initial)
697:         # 'required' is always okay for <select multiple>.
698:         if self.allow_multiple_selected:
699:             return use_required_attribute
700: 
701:         first_choice = next(iter(self.choices), None)
702:         return use_required_attribute and first_choice is not None and self._choice_has_empty_value(first_choice)
703: 
704: 
705: class NullBooleanSelect(Select):
706:     """
707:     A Select Widget intended to be used with NullBooleanField.
708:     """
709:     def __init__(self, attrs=None):
710:         choices = (
711:             ('unknown', _('Unknown')),
712:             ('true', _('Yes')),
713:             ('false', _('No')),
714:         )
715:         super().__init__(attrs, choices)
716: 
717:     def format_value(self, value):
718:         try:
719:             return {
720:                 True: 'true', False: 'false',
721:                 'true': 'true', 'false': 'false',
722:                 # For backwards compatibility with Django < 2.2.
723:                 '2': 'true', '3': 'false',
724:             }[value]
725:         except KeyError:
726:             return 'unknown'
727: 
728:     def value_from_datadict(self, data, files, name):
729:         value = data.get(name)
730:         return {
731:             True: True,
732:             'True': True,
733:             'False': False,
734:             False: False,
735:             'true': True,
736:             'false': False,
737:             # For backwards compatibility with Django < 2.2.
738:             '2': True,
739:             '3': False,
740:         }.get(value)
741: 
742: 
743: class SelectMultiple(Select):
744:     allow_multiple_selected = True
745: 
746:     def value_from_datadict(self, data, files, name):
747:         try:
748:             getter = data.getlist
749:         except AttributeError:
750:             getter = data.get
751:         return getter(name)
752: 
753:     def value_omitted_from_data(self, data, files, name):
754:         # An unselected <select multiple> doesn't appear in POST data, so it's
755:         # never known if the value is actually omitted.
756:         return False
757: 
758: 
759: class RadioSelect(ChoiceWidget):
760:     input_type = 'radio'
761:     template_name = 'django/forms/widgets/radio.html'
762:     option_template_name = 'django/forms/widgets/radio_option.html'
763: 
764: 
765: class CheckboxSelectMultiple(ChoiceWidget):
766:     allow_multiple_selected = True
767:     input_type = 'checkbox'
768:     template_name = 'django/forms/widgets/checkbox_select.html'
769:     option_template_name = 'django/forms/widgets/checkbox_option.html'
770: 
771:     def use_required_attribute(self, initial):
772:         # Don't use the 'required' attribute because browser validation would
773:         # require all checkboxes to be checked instead of at least one.
774:         return False
775: 
776:     def value_omitted_from_data(self, data, files, name):
777:         # HTML checkboxes don't appear in POST data if not checked, so it's
778:         # never known if the value is actually omitted.
779:         return False
780: 
781:     def id_for_label(self, id_, index=None):
782:         """"
783:         Don't include for="field_0" in <label> because clicking such a label
784:         would toggle the first checkbox.
785:         """
786:         if index is None:
787:             return ''
788:         return super().id_for_label(id_, index)
789: 
790: 
791: class MultiWidget(Widget):
792:     """
793:     A widget that is composed of multiple widgets.
794: 
795:     In addition to the values added by Widget.get_context(), this widget
796:     adds a list of subwidgets to the context as widget['subwidgets'].
797:     These can be looped over and rendered like normal widgets.
798: 
799:     You'll probably want to use this class with MultiValueField.
800:     """
801:     template_name = 'django/forms/widgets/multiwidget.html'
802: 
803:     def __init__(self, widgets, attrs=None):
804:         self.widgets = [w() if isinstance(w, type) else w for w in widgets]
805:         super().__init__(attrs)
806: 
807:     @property
808:     def is_hidden(self):
809:         return all(w.is_hidden for w in self.widgets)
810: 
811:     def get_context(self, name, value, attrs):
812:         context = super().get_context(name, value, attrs)
813:         if self.is_localized:
814:             for widget in self.widgets:
815:                 widget.is_localized = self.is_localized
816:         # value is a list of values, each corresponding to a widget
817:         # in self.widgets.
818:         if not isinstance(value, list):
819:             value = self.decompress(value)
820: 
821:         final_attrs = context['widget']['attrs']
822:         input_type = final_attrs.pop('type', None)
823:         id_ = final_attrs.get('id')
824:         subwidgets = []
825:         for i, widget in enumerate(self.widgets):
826:             if input_type is not None:
827:                 widget.input_type = input_type
828:             widget_name = '%s_%s' % (name, i)
829:             try:
830:                 widget_value = value[i]
831:             except IndexError:
832:                 widget_value = None
833:             if id_:
834:                 widget_attrs = final_attrs.copy()
835:                 widget_attrs['id'] = '%s_%s' % (id_, i)
836:             else:
837:                 widget_attrs = final_attrs
838:             subwidgets.append(widget.get_context(widget_name, widget_value, widget_attrs)['widget'])
839:         context['widget']['subwidgets'] = subwidgets
840:         return context
841: 
842:     def id_for_label(self, id_):
843:         if id_:
844:             id_ += '_0'
845:         return id_
846: 
847:     def value_from_datadict(self, data, files, name):
848:         return [widget.value_from_datadict(data, files, name + '_%s' % i) for i, widget in enumerate(self.widgets)]
849: 
850:     def value_omitted_from_data(self, data, files, name):
851:         return all(
852:             widget.value_omitted_from_data(data, files, name + '_%s' % i)
853:             for i, widget in enumerate(self.widgets)
854:         )
855: 
856:     def decompress(self, value):
857:         """
858:         Return a list of decompressed values for the given compressed value.
859:         The given value can be assumed to be valid, but not necessarily
860:         non-empty.
861:         """
862:         raise NotImplementedError('Subclasses must implement this method.')
863: 
864:     def _get_media(self):
865:         """
866:         Media for a multiwidget is the combination of all media of the
867:         subwidgets.
868:         """
869:         media = Media()
870:         for w in self.widgets:
871:             media = media + w.media
872:         return media
873:     media = property(_get_media)
874: 
875:     def __deepcopy__(self, memo):
876:         obj = super().__deepcopy__(memo)
877:         obj.widgets = copy.deepcopy(self.widgets)
878:         return obj
879: 
880:     @property
881:     def needs_multipart_form(self):
882:         return any(w.needs_multipart_form for w in self.widgets)
883: 
884: 
885: class SplitDateTimeWidget(MultiWidget):
886:     """
887:     A widget that splits datetime input into two <input type="text"> boxes.
888:     """
889:     supports_microseconds = False
890:     template_name = 'django/forms/widgets/splitdatetime.html'
891: 
892:     def __init__(self, attrs=None, date_format=None, time_format=None, date_attrs=None, time_attrs=None):
893:         widgets = (
894:             DateInput(
895:                 attrs=attrs if date_attrs is None else date_attrs,
896:                 format=date_format,
897:             ),
898:             TimeInput(
899:                 attrs=attrs if time_attrs is None else time_attrs,
900:                 format=time_format,
901:             ),
902:         )
903:         super().__init__(widgets)
904: 
905:     def decompress(self, value):
906:         if value:
907:             value = to_current_timezone(value)
908:             return [value.date(), value.time()]
909:         return [None, None]
910: 
911: 
912: class SplitHiddenDateTimeWidget(SplitDateTimeWidget):
913:     """
914:     A widget that splits datetime input into two <input type="hidden"> inputs.
915:     """
916:     template_name = 'django/forms/widgets/splithiddendatetime.html'
917: 
918:     def __init__(self, attrs=None, date_format=None, time_format=None, date_attrs=None, time_attrs=None):
919:         super().__init__(attrs, date_format, time_format, date_attrs, time_attrs)
920:         for widget in self.widgets:
921:             widget.input_type = 'hidden'
922: 
923: 
924: class SelectDateWidget(Widget):
925:     """
926:     A widget that splits date input into three <select> boxes.
927: 
928:     This also serves as an example of a Widget that has more than one HTML
929:     element and hence implements value_from_datadict.
930:     """
931:     none_value = ('', '---')
932:     month_field = '%s_month'
933:     day_field = '%s_day'
934:     year_field = '%s_year'
935:     template_name = 'django/forms/widgets/select_date.html'
936:     input_type = 'select'
937:     select_widget = Select
938:     date_re = re.compile(r'(\d{4}|0)-(\d\d?)-(\d\d?)$')
939: 
940:     def __init__(self, attrs=None, years=None, months=None, empty_label=None):
941:         self.attrs = attrs or {}
942: 
943:         # Optional list or tuple of years to use in the "year" select box.
944:         if years:
945:             self.years = years
946:         else:
947:             this_year = datetime.date.today().year
948:             self.years = range(this_year, this_year + 10)
949: 
950:         # Optional dict of months to use in the "month" select box.
951:         if months:
952:             self.months = months
953:         else:
954:             self.months = MONTHS
955: 
956:         # Optional string, list, or tuple to use as empty_label.
957:         if isinstance(empty_label, (list, tuple)):
958:             if not len(empty_label) == 3:
959:                 raise ValueError('empty_label list/tuple must have 3 elements.')
960: 
961:             self.year_none_value = ('', empty_label[0])
962:             self.month_none_value = ('', empty_label[1])
963:             self.day_none_value = ('', empty_label[2])
964:         else:
965:             if empty_label is not None:
966:                 self.none_value = ('', empty_label)
967: 
968:             self.year_none_value = self.none_value
969:             self.month_none_value = self.none_value
970:             self.day_none_value = self.none_value
971: 
972:     def get_context(self, name, value, attrs):
973:         context = super().get_context(name, value, attrs)
974:         date_context = {}
975:         year_choices = [(i, str(i)) for i in self.years]
976:         if not self.is_required:
977:             year_choices.insert(0, self.year_none_value)
978:         year_name = self.year_field % name
979:         date_context['year'] = self.select_widget(attrs, choices=year_choices).get_context(
980:             name=year_name,
981:             value=context['widget']['value']['year'],
982:             attrs={**context['widget']['attrs'], 'id': 'id_%s' % year_name},
983:         )
984:         month_choices = list(self.months.items())
985:         if not self.is_required:
986:             month_choices.insert(0, self.month_none_value)
987:         month_name = self.month_field % name
988:         date_context['month'] = self.select_widget(attrs, choices=month_choices).get_context(
989:             name=month_name,
990:             value=context['widget']['value']['month'],
991:             attrs={**context['widget']['attrs'], 'id': 'id_%s' % month_name},
992:         )
993:         day_choices = [(i, i) for i in range(1, 32)]
994:         if not self.is_required:
995:             day_choices.insert(0, self.day_none_value)
996:         day_name = self.day_field % name
997:         date_context['day'] = self.select_widget(attrs, choices=day_choices,).get_context(
998:             name=day_name,
999:             value=context['widget']['value']['day'],
1000:             attrs={**context['widget']['attrs'], 'id': 'id_%s' % day_name},
1001:         )
1002:         subwidgets = []
1003:         for field in self._parse_date_fmt():
1004:             subwidgets.append(date_context[field]['widget'])
1005:         context['widget']['subwidgets'] = subwidgets
1006:         return context
1007: 
1008:     def format_value(self, value):
1009:         """
1010:         Return a dict containing the year, month, and day of the current value.
1011:         Use dict instead of a datetime to allow invalid dates such as February
1012:         31 to display correctly.
1013:         """
1014:         year, month, day = None, None, None
1015:         if isinstance(value, (datetime.date, datetime.datetime)):
1016:             year, month, day = value.year, value.month, value.day
1017:         elif isinstance(value, str):
1018:             match = self.date_re.match(value)
1019:             if match:
1020:                 # Convert any zeros in the date to empty strings to match the
1021:                 # empty option value.
1022:                 year, month, day = [int(val) or '' for val in match.groups()]
1023:             elif settings.USE_L10N:
1024:                 input_format = get_format('DATE_INPUT_FORMATS')[0]
1025:                 try:
1026:                     d = datetime.datetime.strptime(value, input_format)
1027:                 except ValueError:
1028:                     pass
1029:                 else:
1030:                     year, month, day = d.year, d.month, d.day
1031:         return {'year': year, 'month': month, 'day': day}
1032: 
1033:     @staticmethod
1034:     def _parse_date_fmt():
1035:         fmt = get_format('DATE_FORMAT')
1036:         escaped = False
1037:         for char in fmt:
1038:             if escaped:
1039:                 escaped = False
1040:             elif char == '\\':
1041:                 escaped = True
1042:             elif char in 'Yy':
1043:                 yield 'year'
1044:             elif char in 'bEFMmNn':
1045:                 yield 'month'
1046:             elif char in 'dj':
1047:                 yield 'day'
1048: 
1049:     def id_for_label(self, id_):
1050:         for first_select in self._parse_date_fmt():
1051:             return '%s_%s' % (id_, first_select)
1052:         return '%s_month' % id_
1053: 
1054:     def value_from_datadict(self, data, files, name):
1055:         y = data.get(self.year_field % name)
1056:         m = data.get(self.month_field % name)
1057:         d = data.get(self.day_field % name)
1058:         if y == m == d == '':
1059:             return None
1060:         if y is not None and m is not None and d is not None:
1061:             if settings.USE_L10N:
1062:                 input_format = get_format('DATE_INPUT_FORMATS')[0]
1063:                 try:
1064:                     date_value = datetime.date(int(y), int(m), int(d))
1065:                 except ValueError:
1066:                     pass
1067:                 else:
1068:                     date_value = datetime_safe.new_date(date_value)
1069:                     return date_value.strftime(input_format)
1070:             # Return pseudo-ISO dates with zeros for any unselected values,
1071:             # e.g. '2017-0-23'.
1072:             return '%s-%s-%s' % (y or 0, m or 0, d or 0)
1073:         return data.get(name)
1074: 
1075:     def value_omitted_from_data(self, data, files, name):
1076:         return not any(
1077:             ('{}_{}'.format(name, interval) in data)
1078:             for interval in ('year', 'month', 'day')
1079:         )
1080: 
</content>
</file>
