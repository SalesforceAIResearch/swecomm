{"instance_id": "sympy__sympy-16281", "identified_spans": [{"file_path": "sympy/printing/pretty/pretty.py", "span_ids": ["PrettyPrinter._print_Product"], "content": [{"span_id": "PrettyPrinter._print_Product", "start_line": 473, "end_line": 526, "content": ["    def _print_Product(self, expr):\n", "        func = expr.term\n", "        pretty_func = self._print(func)\n", "\n", "        horizontal_chr = xobj('_', 1)\n", "        corner_chr = xobj('_', 1)\n", "        vertical_chr = xobj('|', 1)\n", "\n", "        if self._use_unicode:\n", "            # use unicode corners\n", "            horizontal_chr = xobj('-', 1)\n", "            corner_chr = u'\\N{BOX DRAWINGS LIGHT DOWN AND HORIZONTAL}'\n", "\n", "        func_height = pretty_func.height()\n", "\n", "        first = True\n", "        max_upper = 0\n", "        sign_height = 0\n", "\n", "        for lim in expr.limits:\n", "            width = (func_height + 2) * 5 // 3 - 2\n", "            sign_lines = []\n", "            sign_lines.append(corner_chr + (horizontal_chr*width) + corner_chr)\n", "            for i in range(func_height + 1):\n", "                sign_lines.append(vertical_chr + (' '*width) + vertical_chr)\n", "\n", "            pretty_sign = stringPict('')\n", "            pretty_sign = prettyForm(*pretty_sign.stack(*sign_lines))\n", "\n", "            pretty_upper = self._print(lim[2])\n", "            pretty_lower = self._print(Equality(lim[0], lim[1]))\n", "\n", "            max_upper = max(max_upper, pretty_upper.height())\n", "\n", "            if first:\n", "                sign_height = pretty_sign.height()\n", "\n", "            pretty_sign = prettyForm(*pretty_sign.above(pretty_upper))\n", "            pretty_sign = prettyForm(*pretty_sign.below(pretty_lower))\n", "\n", "            if first:\n", "                pretty_func.baseline = 0\n", "                first = False\n", "\n", "            height = pretty_sign.height()\n", "            padding = stringPict('')\n", "            padding = prettyForm(*padding.stack(*[' ']*(height - 1)))\n", "            pretty_sign = prettyForm(*pretty_sign.right(padding))\n", "\n", "            pretty_func = prettyForm(*pretty_sign.right(pretty_func))\n", "\n", "        pretty_func.baseline = max_upper + sign_height//2\n", "        pretty_func.binding = prettyForm.MUL\n", "        return pretty_func\n"]}]}]}